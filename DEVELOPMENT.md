# dbpilot é–‹ç™ºãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

**dbpilot** - Rust + Tauriã§ä½œã‚‹çˆ†é€ŸDBã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

- GitHub: https://github.com/nakayamaryo0731/dbpilot
- å¯¾å¿œDB: PostgreSQLï¼ˆåˆæœŸã‚¿ãƒ¼ã‚²ãƒƒãƒˆï¼‰
- æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯: Tauri v2 + React + TypeScript + Rust

## ç›®æŒ‡ã™æ©Ÿèƒ½

1. **SQLã‚¨ãƒ‡ã‚£ã‚¿** - Monaco Editorãƒ™ãƒ¼ã‚¹ã€ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆã€è£œå®Œ
2. **ã‚¹ã‚­ãƒ¼ãƒè¡¨ç¤º** - ãƒ†ãƒ¼ãƒ–ãƒ«ã€ã‚«ãƒ©ãƒ ã€å‹ã€åˆ¶ç´„æƒ…å ±
3. **ERå›³** - React Flowã§ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å¯è¦–åŒ–
4. **ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹/å¤–éƒ¨ã‚­ãƒ¼æƒ…å ±** - è©³ç´°ãªDBæ§‹é€ ã®é–²è¦§
5. **AIæ©Ÿèƒ½** - è‡ªç„¶è¨€èªã‹ã‚‰SQLç”Ÿæˆï¼ˆClaude API / Ollamaï¼‰
6. **ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½** - CSV / Google Sheetså‡ºåŠ›

## ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã®å®Ÿè£…æ–¹é‡

### CSVå‡ºåŠ›ï¼ˆç°¡å˜ï¼‰
- Rustå´ã§ `csv` ã‚¯ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ç”¨
- ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜

### Google Sheetså‡ºåŠ›ï¼ˆå„ªå…ˆå®Ÿè£…ã—ãŸã„ï¼‰
- Google Sheets API v4 ã‚’ä½¿ç”¨
- OAuth 2.0èªè¨¼ãŒå¿…è¦ï¼ˆåˆå›ã®ã¿ãƒ–ãƒ©ã‚¦ã‚¶èªè¨¼ï¼‰
- å®Ÿè£…æ–¹æ³•:
  1. Rustå´: `google-sheets4` ã‚¯ãƒ¬ãƒ¼ãƒˆ
  2. ã¾ãŸã¯ ãƒ•ãƒ­ãƒ³ãƒˆå´: `googleapis` npm ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

**æ¨å¥¨**: Rustå´ã§å®Ÿè£…ï¼ˆTauriã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¢ãƒ‡ãƒ«ã«åˆã†ï¼‰

```toml
# Cargo.toml ã«è¿½åŠ 
google-sheets4 = "6"
yup-oauth2 = "11"
csv = "1"
```

### UIã‚¤ãƒ¡ãƒ¼ã‚¸
```
[ã‚¯ã‚¨ãƒªçµæœ]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name   â”‚ email              â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ Alice  â”‚ alice@example.com  â”‚
â”‚ 2  â”‚ Bob    â”‚ bob@example.com    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        [CSV] [Google Sheets] â† ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒœã‚¿ãƒ³
```

## UIè¨­è¨ˆã‚¤ãƒ¡ãƒ¼ã‚¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI Query Bar                                      â”‚
â”‚  ã€Œå…ˆæœˆã®å£²ä¸Šåˆè¨ˆã‚’é¡§å®¢åˆ¥ã«ã€                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Tables] [Query] [ER Diagram]                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ mydb      â”‚  SQLã‚¨ãƒ‡ã‚£ã‚¿ (Monaco Editor)        â”‚
â”‚  â”œâ”€ users    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”œâ”€ orders   â”‚  â”‚ SELECT * FROM users        â”‚    â”‚
â”‚  â””â”€ products â”‚  â”‚ WHERE created_at > ...     â”‚    â”‚
â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚  çµæœãƒ†ãƒ¼ãƒ–ãƒ« / ã‚«ãƒ©ãƒ æƒ…å ± / Index  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯è©³ç´°

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | æŠ€è¡“ | ç†ç”± |
|----------|------|------|
| ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | Tauri v2 | è»½é‡ã€Rustè£½ã€ã‚»ã‚­ãƒ¥ã‚¢ |
| ãƒ•ãƒ­ãƒ³ãƒˆ | React + TypeScript | ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ å……å®Ÿ |
| SQLã‚¨ãƒ‡ã‚£ã‚¿ | Monaco Editor | VSCodeåŒç­‰ã€è£œå®Œãƒ»ãƒã‚¤ãƒ©ã‚¤ãƒˆ |
| ERå›³ | React Flow | ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒãƒ¼ãƒ‰æç”» |
| ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤º | TanStack Table | é«˜æ©Ÿèƒ½ã€ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« |
| AI | Claude API / Ollama | å¥½ã¿ã§é¸æŠ |
| DBæ¥ç¶š | sqlx (Rust) | å‹å®‰å…¨ã€éåŒæœŸã€è¤‡æ•°DBå¯¾å¿œ |

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†çŠ¶æ³

### å®Œäº†
- [x] GitHubãƒªãƒã‚¸ãƒˆãƒªä½œæˆ
- [x] Tauri + Reactãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–
- [x] npmä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### æ¬¡ã«ã‚„ã‚‹ã“ã¨
- [ ] Rustå´ã®ä¾å­˜é–¢ä¿‚è¿½åŠ  (sqlx, tokioç­‰)
- [ ] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ä¾å­˜é–¢ä¿‚è¿½åŠ  (Monaco Editor, React Flowç­‰)
- [ ] åŸºæœ¬çš„ãªUIæ§‹æˆã‚’ä½œæˆ
- [ ] PostgreSQLæ¥ç¶šæ©Ÿèƒ½ã‚’å®Ÿè£…

## ç’°å¢ƒæƒ…å ±

```
rustc 1.92.0
cargo 1.92.0
node v24.9.0
pnpm 10.18.0
```

## Rustä¾å­˜é–¢ä¿‚ï¼ˆè¿½åŠ äºˆå®šï¼‰

`src-tauri/Cargo.toml` ã«ä»¥ä¸‹ã‚’è¿½åŠ ã™ã‚‹ï¼š

```toml
[dependencies]
tauri = { version = "2", features = [] }
tauri-plugin-opener = "2"
serde = { version = "1", features = ["derive"] }
serde_json = "1"

# è¿½åŠ äºˆå®š
sqlx = { version = "0.8", features = ["runtime-tokio", "postgres", "json"] }
tokio = { version = "1", features = ["full"] }
anyhow = "1"
thiserror = "2"
```

## ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ä¾å­˜é–¢ä¿‚ï¼ˆè¿½åŠ äºˆå®šï¼‰

```bash
pnpm add @monaco-editor/react @xyflow/react @tanstack/react-table
pnpm add -D tailwindcss postcss autoprefixer
```

## PostgreSQL ã‚¹ã‚­ãƒ¼ãƒå–å¾—ã‚¯ã‚¨ãƒªä¾‹

```sql
-- ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§ãƒ»ã‚«ãƒ©ãƒ æƒ…å ±
SELECT * FROM information_schema.columns
WHERE table_schema = 'public';

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
SELECT * FROM pg_indexes WHERE schemaname = 'public';

-- å¤–éƒ¨ã‚­ãƒ¼
SELECT
  tc.constraint_name,
  tc.table_name,
  kcu.column_name,
  ccu.table_name AS foreign_table,
  ccu.column_name AS foreign_column
FROM information_schema.table_constraints tc
JOIN information_schema.key_column_usage kcu
  ON tc.constraint_name = kcu.constraint_name
JOIN information_schema.constraint_column_usage ccu
  ON tc.constraint_name = ccu.constraint_name
WHERE tc.constraint_type = 'FOREIGN KEY';
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
dbpilot/
â”œâ”€â”€ src-tauri/           # Rust ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.rs
â”‚   â”‚   â”œâ”€â”€ lib.rs
â”‚   â”‚   â”œâ”€â”€ db/          # DBæ¥ç¶šãƒ»ã‚¯ã‚¨ãƒªå®Ÿè¡Œï¼ˆä½œæˆäºˆå®šï¼‰
â”‚   â”‚   â”œâ”€â”€ schema/      # ã‚¹ã‚­ãƒ¼ãƒæƒ…å ±å–å¾—ï¼ˆä½œæˆäºˆå®šï¼‰
â”‚   â”‚   â””â”€â”€ ai/          # LLMé€£æºï¼ˆä½œæˆäºˆå®šï¼‰
â”‚   â””â”€â”€ Cargo.toml
â”œâ”€â”€ src/                 # React ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ components/      # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆä½œæˆäºˆå®šï¼‰
â”‚   â”‚   â”œâ”€â”€ SqlEditor/   # Monaco Editor
â”‚   â”‚   â”œâ”€â”€ TableTree/   # ã‚µã‚¤ãƒ‰ãƒãƒ¼
â”‚   â”‚   â”œâ”€â”€ ErDiagram/   # React Flow
â”‚   â”‚   â”œâ”€â”€ ResultGrid/  # çµæœè¡¨ç¤º
â”‚   â”‚   â””â”€â”€ AiBar/       # è‡ªç„¶è¨€èªå…¥åŠ›
â”‚   â””â”€â”€ App.tsx
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.ts
â””â”€â”€ DEVELOPMENT.md       # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

## é–‹ç™ºã‚³ãƒãƒ³ãƒ‰

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
pnpm tauri dev

# ãƒ“ãƒ«ãƒ‰
pnpm tauri build
```

## æ³¨æ„äº‹é …

- `src-tauri/Cargo.toml` ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åãŒ `dbpilot-temp` ã«ãªã£ã¦ã„ã‚‹ã®ã§ `dbpilot` ã«å¤‰æ›´ã™ã‚‹
- `src-tauri/src/lib.rs` ã® `name` ã‚‚åŒæ§˜ã«å¤‰æ›´ã™ã‚‹
